<!DOCTYPE html>
<html>

<head>
  <title>QGIS Track Profile 2 Web</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
  <style>
    html,
    body,
    #map,
    #elevation-div {
      height: 100%;
      width: 100%;
      padding: 0px;
      margin: 0px;
      position: relative;
      z-index: 9999;
    }

    #elevation-div { overflow: visible; }
    #map {
      height: 75%;
      position: relative;
      z-index: 1;
    }

    #elevation-div {
      height: 25%;
      font: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;
    }

    .data-summary {
      font-family: "Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif;
      font-size: 12px;
      position: absolute;
      bottom: 0;
      left: 45px;
    }

    .data-summary .summaryvalue {
      font-weight: bold;
    }

  </style>
  <style>
   .custom-theme.leaflet-control.elevation .area {
    fill: #d45f5f;
    stroke: hsla(60, 0%, 0%, 0.85);
    stroke-width: 2.5;
   }

   .custom-theme.height-focus.circle-lower {
     fill: #ffb800;
   }

   .custom-theme.elevation-polyline {
     stroke: #ff0000;
     stroke-opacity: 0.85 ;
   }
 </style>
  <script src="https://d3js.org/d3.v4.js" charset="utf-8"></script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.2/leaflet.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.2/leaflet-src.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-gpx/1.4.0/gpx.js"></script>

  <link rel="stylesheet" href="https://unpkg.com/@raruto/leaflet-elevation@0.3.1/leaflet-elevation.min.css" />
  <script src="https://unpkg.com/@raruto/leaflet-elevation@0.3.1/leaflet-elevation.min.js"></script>

</head>

<body>

  <div id="map"></div>
  <div id="elevation-div" class="leaflet-control elevation"></div>

  <div id="data-summary" class="data-summary"><span class="totlen"><span class="summarylabel">Total Length: </span><span class="summaryvalue">0</span></span> &mdash; <span class="maxele"><span class="summarylabel">Max Elevation: </span><span class="summaryvalue">0</span></span>
    &mdash; <span class="minele"><span class="summarylabel">Min Elevation: </span><span class="summaryvalue">0</span></span></div>

  <script>
  var opts = {"map": {"center": [41.4583, 12.7059], "zoom": 5, "markerZoomAnimation": false, "zoomControl": false}, "zoomControl": {"position": "topleft"}, "elevationControl": {"data": "{\"name\":\"Updated\", \"type\":\"FeatureCollection\",\"features\": [{ \"type\": \"Feature\", \"properties\": { }, \"geometry\": { \"type\": \"MultiLineString\", \"coordinates\": [ [ [ -3.3939946985018965, 56.39957788534486,118.29882049560547 ], [ -3.39367317525679, 56.39954650554033,119.90017700195312 ], [ -3.3934293858344677, 56.39951694324682,119.09949493408203 ], [ -3.392922399381411, 56.39945803524127,120.9997329711914 ], [ -3.392312831085527, 56.39938143416404,122.2994613647461 ], [ -3.391703559802751, 56.399312902289545,123.90081787109375 ], [ -3.3910646869322645, 56.39923124032242,125.60089111328125 ], [ -3.390099447763453, 56.39911824035403,128.60069274902344 ], [ -3.3893143312096337, 56.39901936592875,132.00082397460938 ], [ -3.389077704218124, 56.3989197270706,132.90020751953125 ], [ -3.3888381384748527, 56.398739365530616,134.40011596679688 ], [ -3.3887167886099534, 56.39860613272557,133.99977111816406 ], [ -3.388526726895288, 56.398452134550666,133.99977111816406 ], [ -3.388294519771065, 56.39820708545892,135.60113525390625 ], [ -3.3881032864270737, 56.39802079770592,136.5992431640625 ], [ -3.3878002193360133, 56.397695785789566,138.8011016845703 ], [ -3.387558513477109, 56.39745622533815,139.0012664794922 ], [ -3.387468437478043, 56.397381861813074,139.0999755859375 ], [ -3.387473050643909, 56.39724183459671,139.30015563964844 ], [ -3.387544023834459, 56.39705799539063,139.0999755859375 ], [ -3.3875114977920653, 56.39669765299091,138.49948120117188 ], [ -3.387531602088387, 56.39644977885749,136.30035400390625 ], [ -3.387578662989205, 56.39614238259296,133.99977111816406 ], [ -3.3876336643682032, 56.39578644432451,131.8006591796875 ], [ -3.3876553339492608, 56.39558162203819,130.1005859375 ], [ -3.387593784982416, 56.39549078831205,130.39947509765625 ], [ -3.3874926397751435, 56.39537886293671,130.1005859375 ], [ -3.3875397859657106, 56.39534064960524,130.1005859375 ], [ -3.3873889501778245, 56.39519697813107,130.39947509765625 ], [ -3.3869886840790286, 56.3948676681514,129.4013671875 ], [ -3.386648795968485, 56.39459690214592,132.0995330810547 ], [ -3.38639819665102, 56.39437897365977,133.5994415283203 ], [ -3.386171896006336, 56.39429536498284,132.4011688232422 ], [ -3.3859756833189674, 56.39423833796514,130.39947509765625 ], [ -3.3853300034489138, 56.39410019447057,134.199951171875 ], [ -3.385158015939533, 56.393908303565155,133.39926147460938 ], [ -3.384957703030707, 56.39373826353391,133.1990966796875 ], [ -3.384718971090084, 56.39357941961349,134.19964599609375 ], [ -3.3845518728918234, 56.39352206521628,133.70033264160156 ], [ -3.384277262346407, 56.39344437625991,133.0998077392578 ], [ -3.3839751065523958, 56.39341006358322,134.4999237060547 ], [ -3.383662662753162, 56.39335971395371,133.89938354492188 ], [ -3.3835062459520664, 56.393329157343665,134.39869689941406 ], [ -3.383262113557415, 56.39328881180389,133.4000701904297 ], [ -3.383008278850681, 56.393248574009604,134.99923706054688 ], [ -3.382744741859455, 56.393208443901095,138.20094299316406 ], [ -3.3823764250340824, 56.39322331825355,137.70042419433594 ], [ -3.382212452240408, 56.393252064694906,138.00091552734375 ], [ -3.382105136129959, 56.39323710997291,139.39981079101562 ], [ -3.382084170444587, 56.393194274273256,136.59866333007812 ], [ -3.3819806335041958, 56.39314966710404,138.4983673095703 ], [ -3.381666049999151, 56.39304011589322,134.7991180419922 ], [ -3.3815153646095926, 56.393033719457804,136.30152893066406 ], [ -3.381039246657754, 56.39302018074351,138.59852600097656 ], [ -3.3810845452837692, 56.392930845543674,134.9994354248047 ], [ -3.3811030738905727, 56.39290641261792,134.9994354248047 ], [ -3.3810375703767774, 56.39283984631073,132.10147094726562 ], [ -3.3809099541182177, 56.39266629826888,131.50050354003906 ], [ -3.380657062681994, 56.39238377982849,128.5991973876953 ], [ -3.3804488102782875, 56.39212768226045,120.90022277832031 ], [ -3.380317224230076, 56.39197840435732,117.40129089355469 ], [ -3.3802960665183774, 56.39193018682673,112.60028076171875 ], [ -3.380355477264726, 56.39142615178281,92.00065612792969 ], [ -3.3804408509826085, 56.391371364512985,92.00065612792969 ], [ -3.380612376815855, 56.39128331582627,89.60015106201172 ], [ -3.38078292782414, 56.391168359372706,84.39849853515625 ], [ -3.3809257347710306, 56.39109139742294,80.10162353515625 ], [ -3.3810190556416493, 56.39098806814083,74.49932861328125 ], [ -3.381390775001435, 56.39053169827313,65.79874420166016 ], [ -3.381311404015752, 56.39048412948521,64.70032501220703 ], [ -3.381220967075366, 56.39039899818797,63.89904022216797 ], [ -3.3811214130010794, 56.39033011941857,62.60029602050781 ], [ -3.3809735437627033, 56.390267162411234,63.101097106933594 ], [ -3.380823726961526, 56.390150390152144,61.398372650146484 ], [ -3.3806725476033943, 56.38999594715129,58.80088424682617 ], [ -3.3805819184868735, 56.38990543386086,57.398643493652344 ], [ -3.380384178772711, 56.38980534573887,56.4003791809082 ], [ -3.38015636076264, 56.38967867375578,55.29861831665039 ], [ -3.3798216287667397, 56.389547807601545,52.60096740722656 ], [ -3.379367557808676, 56.38933751318645,51.399044036865234 ], [ -3.379528402178894, 56.38922266638569,49.29901885986328 ], [ -3.3793910200378408, 56.38918112553919,48.30075454711914 ], [ -3.3792022107066484, 56.3890594015001,47.900115966796875 ], [ -3.3791038311063804, 56.389022810133355,45.80009078979492 ], [ -3.379021742532652, 56.38889989866729,45.199127197265625 ], [ -3.3789602250860025, 56.38880906040697,44.100704193115234 ], [ -3.378724272067618, 56.38872554572975,44.501346588134766 ], [ -3.378713403399586, 56.38869336453739,44.501346588134766 ], [ -3.378981912887718, 56.38833505564938,41.700199127197266 ], [ -3.3788598529087728, 56.38818028659711,38.999210357666016 ], [ -3.3788076495504753, 56.38807857731808,38.999210357666016 ], [ -3.3786232981655497, 56.38781144357068,37.399986267089844 ], [ -3.378510748302515, 56.38765118475313,34.29835891723633 ], [ -3.3784874563357183, 56.38754377019558,33.80089569091797 ], [ -3.3785023865815598, 56.38741977961691,33.6005744934082 ], [ -3.3785277959026123, 56.38731720722408,30.19846534729004 ], [ -3.3786216976462047, 56.38723002424291,30.69926643371582 ], [ -3.378745286290641, 56.387158662076395,32.19832992553711 ], [ -3.3788869154542027, 56.38704941339206,30.298625946044922 ], [ -3.379163388342411, 56.386911746172835,29.20020294189453 ], [ -3.379297454411453, 56.38686180159746,26.29889488220215 ], [ -3.379325974342067, 56.3868453332624,26.29889488220215 ], [ -3.37933992877403, 56.38669443501573,22.499483108520508 ], [ -3.379298205633288, 56.38661414403694,16.900527954101562 ], [ -3.3792279629403987, 56.3865503213611,13.598579406738281 ], [ -3.378561695887792, 56.38664387059509,12.500155448913574 ], [ -3.378520363344253, 56.3865743423767,9.799168586730957 ], [ -3.378606873640315, 56.386282661808366,5.699276447296143 ], [ -3.378604345619686, 56.38621270210431,4.1000518798828125 ], [ -3.3782622814179635, 56.38614651756123,4.1000518798828125 ], [ -3.3779188578344486, 56.386042661446155,4.200212001800537 ], [ -3.3770919293696546, 56.3857180615713,4.801173210144043 ], [ -3.3764924060047683, 56.385509372460625,5.89959716796875 ], [ -3.376278204521401, 56.38522103201527,3.999891519546509 ], [ -3.375865137317469, 56.384531122620025,3.999891519546509 ], [ -3.3755898324455416, 56.38416270396964,3.999891519546509 ], [ -3.374766260907231, 56.383929574119364,3.999891519546509 ], [ -3.3733934701856616, 56.38353563055475,3.999891519546509 ], [ -3.3726108563276007, 56.38336125320605,3.999891519546509 ], [ -3.37116669445807, 56.38314035300026,3.699410915374756 ], [ -3.3698234155666236, 56.38302599484898,2.901467800140381 ], [ -3.368229481710733, 56.382957458247176,2.901467800140381 ], [ -3.3672579121179904, 56.3829251080829,3.4990904331207275 ], [ -3.3660139661804283, 56.38287421722943,5.00149393081665 ], [ -3.365198759574229, 56.38287242991518,5.198475360870361 ], [ -3.364146513933258, 56.38275480510892,6.801039218902588 ], [ -3.3629817168599527, 56.382746082256986,8.5004243850708 ], [ -3.361350924760112, 56.38273169925432,9.101385116577148 ], [ -3.3594477598953434, 56.38269874728321,11.001091003417969 ], [ -3.3580117413015573, 56.38270371899284,10.80077075958252 ], [ -3.3558559911524233, 56.38266271124909,10.600449562072754 ], [ -3.3554679814827697, 56.38266695430774,11.3015718460083 ], [ -3.355308669317908, 56.38309938896105,13.401597023010254 ], [ -3.354884911228594, 56.38319015954423,15.598444938659668 ], [ -3.354571060151929, 56.38309668337669,16.700206756591797 ], [ -3.354001946387929, 56.382919856111855,17.100847244262695 ], [ -3.353762265160566, 56.38272866194222,17.100847244262695 ], [ -3.353663353294577, 56.38267590543671,19.401193618774414 ], [ -3.353353708685913, 56.38270082079481,22.199003219604492 ], [ -3.3526518557838583, 56.38261157495198,23.80156707763672 ], [ -3.3521443919101914, 56.38253097240505,22.499483108520508 ], [ -3.3512063477008254, 56.38289652156734,27.600976943969727 ], [ -3.350121076683446, 56.38348978052998,34.101375579833984 ], [ -3.349740291876984, 56.38369850582606,36.20140075683594 ], [ -3.3486348116821096, 56.38372130412339,39.29969024658203 ], [ -3.3483076557616074, 56.383800233839345,41.900516510009766 ], [ -3.348116686899372, 56.383888449115766,43.09910202026367 ], [ -3.346993698711593, 56.38396525965375,43.09910202026367 ], [ -3.346784084541957, 56.384075210046745,42.898780822753906 ], [ -3.34716522994325, 56.38497552244903,52.4006462097168 ], [ -3.3473428861997894, 56.38505973024947,52.60096740722656 ], [ -3.3473927128517995, 56.38537144054138,59.89931106567383 ], [ -3.347836275892694, 56.386389512818724,69.79847717285156 ], [ -3.3477267052220987, 56.38658451543484,70.49959564208984 ], [ -3.347918060294298, 56.38705619640295,77.60095977783203 ], [ -3.3480443652729335, 56.387334772964806,79.60082244873047 ], [ -3.348037512985812, 56.38769016841338,80.59909057617188 ], [ -3.348218226911245, 56.38786048017497,82.39863586425781 ], [ -3.3488589124067047, 56.38786427865081,84.10135650634766 ]]] } }]}", "options": {"position": "topright", "theme": "custom-theme", "useHeightIndicator": true, "collapsed": false, "detachedView": true, "elevationDiv": "#elevation-div"}}, "layersControl": {"options": {"collapsed": false}}, "otmLayer": {"url": "https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png", "options": {"attribution": "Map data: &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>, <a href=\"http://viewfinderpanoramas.org\">SRTM</a> | Map style: &copy; <a href=\"https://opentopomap.org\">OpenTopoMap</a> (<a href=\"https://creativecommons.org/licenses/by-sa/3.0/\">CC-BY-SA</a>)"}}} ;
    var map = new L.Map('map', opts.map);

    var baseLayers = {};
    baseLayers.OTM = new L.TileLayer(opts.otmLayer.url, opts.otmLayer.options);

    var controlZoom = new L.Control.Zoom(opts.zoomControl);
    var controlElevation = L.control.elevation(opts.elevationControl.options);
    var controlLayer = L.control.layers(baseLayers, null, opts.layersControl.options);

    controlZoom.addTo(map);
    controlLayer.addTo(map);

    map.addLayer(baseLayers.OTM);

    map.on('eledata_loaded', function(e) {
      var q = document.querySelector.bind(document);
      var track = e.track_info;

      controlLayer.addOverlay(e.layer, e.name);

      q('.totlen .summaryvalue').innerHTML = track.distance.toFixed(2) + " km";
      q('.maxele .summaryvalue').innerHTML = track.elevation_max.toFixed(2) + " m";
      q('.minele .summaryvalue').innerHTML = track.elevation_min.toFixed(2) + " m";
    });

    controlElevation.loadChart(map);
    controlElevation.loadData(opts.elevationControl.data);
  </script>

</body>

</html>
